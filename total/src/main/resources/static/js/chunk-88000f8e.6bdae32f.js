(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88000f8e"],{2469:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"infoContainer"},[a("div",{staticClass:"top"},[a("div",[a("i",{style:{backgroundImage:"url("+t.logoUrl+")"}}),a("span",[t._v(t._s(t.systemName||"智能安全生产管控平台系统后台"))])]),a("div",[a("i",{on:{click:t.toindex}}),a("i",{on:{click:t.toinformation}},[a("el-badge",{staticClass:"item2",attrs:{"is-dot":t.hasNews}})],1),a("i",[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("button",{staticClass:"btns",on:{click:function(e){t.changeName=!0}}},[t._v("修改姓名")]),a("el-dialog",{attrs:{title:"修改姓名",visible:t.changeName,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.changeName=e}}},[a("el-form",{attrs:{model:t.form1}},[a("el-form-item",{attrs:{label:"姓名:","label-width":t.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"admin"},model:{value:t.form1.name,callback:function(e){t.$set(t.form1,"name",e)},expression:"form1.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.changeName=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changeName=!1,t.updateName()}}},[t._v("确 定")])],1)],1)],1),a("el-dropdown-item",[a("button",{staticClass:"btns",on:{click:function(e){t.changePassword=!0}}},[t._v("修改密码")]),a("el-dialog",{attrs:{title:"修改密码",visible:t.changePassword,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.changePassword=e}}},[a("el-form",{attrs:{model:t.form2}},[a("el-form-item",{attrs:{label:"原密码:","label-width":t.width,required:""}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入原密码"},model:{value:t.form2.old,callback:function(e){t.$set(t.form2,"old",e)},expression:"form2.old"}})],1),a("el-form-item",{attrs:{label:"新密码:","label-width":t.width,required:""}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入新密码，6-20位，数字、字母、字符组成"},model:{value:t.form2.new,callback:function(e){t.$set(t.form2,"new",e)},expression:"form2.new"}})],1),a("el-form-item",{attrs:{label:"重复密码:","label-width":t.width,required:""}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"再次输入密码"},model:{value:t.form2.again,callback:function(e){t.$set(t.form2,"again",e)},expression:"form2.again"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.changePassword=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changePassword=!1,t.updatePassword()}}},[t._v("确 定")])],1)],1)],1),a("el-dropdown-item",[a("button",{staticClass:"btns",on:{click:t.quit}},[t._v("退出登录")])])],1)],1)],1),a("i"),a("i",[t._v(t._s(t.username))])])]),a("div",{staticClass:"centerBody"},[a("baidu-map",{staticClass:"baiduMap",attrs:{center:t.center,zoom:t.zoom,"scroll-wheel-zoom":!0},on:{ready:t.handler,click:t.getClickInfo,zoomend:t.zoomEnd}},[a("bml-marker-clusterer",{attrs:{averageCenter:!0}},t._l(t.markers,function(e,r){return a("bm-marker",{key:r,ref:"changeStytle",refInFor:!0,attrs:{position:{lng:e.lng,lat:e.lat},title:e.companyAdress}},[e.showla?a("bm-label",{attrs:{content:e.companyName+"——"+e.companyAdress,position:{lng:e.lng,lat:e.lat},labelStyle:{color:"white",fontSize:"16px",marginLeft:"40px",backgroundColor:"rgba(21,150,255,0.8)",padding:"15px",border:" 1px solid rgba(1, 28, 49, 0.5)",marginTop:"-20px"}}}):t._e()],1)}),1)],1),a("div",{staticClass:"leftForm"},[a("div",{staticClass:"left-top"},[a("div",[a("div",{staticClass:"title-left"},[t._v("企业概况")]),a("div",{staticClass:"title-right"},[t._v("全部："+t._s(t.alltotal))])]),a("div",{attrs:{id:"chartOne"}})]),a("div",{staticClass:"left-bottom"},[a("div",{staticClass:"bottom-t"},[a("div",[t._v("项目列表")]),a("div",[a("el-radio-group",{attrs:{fill:"#ffffff","text-color":"#ffffff"},on:{change:t.radioValue},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:"",checked:""}},[t._v("全部")]),a("el-radio",{attrs:{label:0}},[t._v("合作中")]),a("el-radio",{attrs:{label:1}},[t._v("暂停合作")])],1)],1)]),a("div",{staticClass:"bottom-m"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryContent,expression:"queryContent"}],attrs:{type:"text",placeholder:"搜索",id:"suggestId"},domProps:{value:t.queryContent},on:{input:function(e){e.target.composing||(t.queryContent=e.target.value)}}}),a("i",{staticClass:"searchIcon",on:{click:t.searchName}})]),a("div",{staticClass:"bottom-b"},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"show-header":t.hiddenHeader}},[t.showID?a("el-table-column",{attrs:{prop:"bid",label:"id"}}):t._e(),t.showName?a("el-table-column",{attrs:{prop:"bname",label:"企业名称，1行显示",width:"200"}}):t._e(),t.showAdr?a("el-table-column",{attrs:{prop:"address",label:"id"}}):t._e(),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:t.isplain},on:{click:function(a){return t.detail(e.row,e.$index)}}},[t._v(t._s(e.row.bname))])]}}])})],1),a("el-pagination",{attrs:{small:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.pageNum},on:{"current-change":t.handleCurrentChange}})],1)])])]),t.reveal?a("div",{staticClass:"rightForm"},[a("div",{staticClass:"right"},[a("div",{staticClass:"right-top"},[a("div",{staticClass:"title-left"},[t._v("项目概况")]),a("div",{staticClass:"title-right"},[t._v("全部："+t._s(t.companyAll))])]),a("div",{staticClass:"right-bottom",attrs:{id:"chartTwo"}})]),a("div",{staticClass:"right"},[a("div",{staticClass:"right-top"},[a("div",{staticClass:"title-left"},[t._v("终端概况")]),a("div",{staticClass:"title-right"},[t._v("全部："+t._s(t.terminalAll))])]),a("div",{staticClass:"right-bottom",attrs:{id:"chartThree"}})]),a("div",{staticClass:"right"},[a("div",{staticClass:"right-top"},[a("div",{staticClass:"title-left"},[t._v("调度员概况")]),a("div",{staticClass:"title-right"},[t._v("全部："+t._s(t.yardAll))])]),a("div",{staticClass:"right-bottom",attrs:{id:"chartFour"}})])]):t._e()],1),a("el-dialog",{attrs:{title:"提示",visible:t.isPageSet,width:"30%"},on:{"update:visible":function(e){t.isPageSet=e}}},[a("span",[t._v("暂无页面设置，请先进行页面设置")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isPageSet=!1}}},[t._v("取 消")]),a("el-button",{on:{click:function(e){t.isPageSet=!1}}},[t._v("确 定")])],1)])],1)},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),i=(a("96cf"),a("3b8d")),o=a("bd0c"),l=[{value:60,name:"暂停合作",itemStyle:{labelLine:{show:!0},label:{show:!0}}},{value:40,name:"合作中",itemStyle:{labelLine:{show:!0},label:{show:!0}}}],c={data1:l,backgroundColor:"",tooltip:{show:!0,trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"企业概况",type:"pie",radius:"60%",center:["50%","50%"],color:["#2DD787","#C3C3C3"],data:l,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:["#2DD787","#C3C3C3"]},normal:{label:{show:!0},labelLine:{show:!0}}},label:{normal:{textStyle:{color:"#fff",fontWeight:"bold",fontSize:14}}}}]},d=[{value:60,name:"暂停合作",itemStyle:{labelLine:{show:!0},label:{show:!0}}},{value:40,name:"合作中",itemStyle:{labelLine:{show:!0},label:{show:!0}}}],h={data2:d,backgroundColor:"",tooltip:{show:!0,trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"项目概况",type:"pie",radius:"60%",center:["50%","50%"],color:["#2DD787","#C3C3C3"],data:d,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:["#2DD787","#C3C3C3"]},normal:{label:{show:!0},labelLine:{show:!0}}},label:{normal:{textStyle:{color:"#fff",fontWeight:"bold",fontSize:14}}}}]},u=[{value:60,name:"暂停合作",itemStyle:{labelLine:{show:!0},label:{show:!0}}},{value:40,name:"合作中",itemStyle:{labelLine:{show:!0},label:{show:!0}}}],m={data3:u,backgroundColor:"",tooltip:{show:!0,trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"终端概况",type:"pie",radius:"60%",center:["50%","50%"],color:["#2DD787","#C3C3C3"],data:u,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:["#2DD787","#C3C3C3"]},normal:{label:{show:!0},labelLine:{show:!0}}},label:{normal:{textStyle:{color:"#fff",fontWeight:"bold",fontSize:14}}}}]},p=[{value:60,name:"暂停合作",itemStyle:{labelLine:{show:!0},label:{show:!0}}},{value:40,name:"合作中",itemStyle:{labelLine:{show:!0},label:{show:!0}}}],f={data4:p,backgroundColor:"",tooltip:{show:!0,trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"调度员概况",type:"pie",radius:"60%",center:["50%","50%"],color:["#2DD787","#C3C3C3"],data:p,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:["#2DD787","#C3C3C3"]},normal:{label:{show:!0},labelLine:{show:!0}}},label:{normal:{textStyle:{color:"#fff",fontWeight:"bold",fontSize:14}}}}]},g=a("2f62");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach(function(e){Object(n["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var v=Object(g["a"])("center"),y=v.mapState,C=v.mapActions,S={name:"TestBaiDu",data:function(){return{changeName:!1,form1:{name:""},formLabelWidth:"60px",changePassword:!1,form2:{old:"",new:"",again:""},width:"100px",center:{lng:104,lat:30},zoom:20,radio:"",showID:!1,showAdr:!1,showName:!1,reveal:!1,queryContent:"",alltotal:"",longitude:"",latitude:"",companyList:[],markers:[],companyAll:0,terminalAll:0,yardAll:0,logoUrl:"",systemName:"",hasNews:!1,isplain:!0,hiddenHeader:!1,isPageSet:!1}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAllCompany();case 2:this.drawChart1(),this.getLogo(),this.getNews();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:w({},y(["pageNum","pageSize","status","list","total","backgroundUrl"]),{username:function(){return sessionStorage.getItem("name")}}),methods:w({},C(["changeNameAsync","changePasswordAsync","allCompanyAsync","allChartsAsync","allLongitudeAsync","logoMeta","newsStatusAsync"]),{getAllCompany:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.allCompanyAsync();case 2:e=t.sent,this.alltotal=e.alltotal,this.cooprate=e.status;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getLogo:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.logoMeta();case 2:210===this.backgroundUrl.code&&(this.isPageSet=!0,this.$router.push("/Index/pageSet")),this.systemName=this.backgroundUrl.data.systemName,this.logoUrl=this.$download+this.backgroundUrl.data.logoUrl;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getNews:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.newsStatusAsync();case 2:e=t.sent,e.length>0?this.hasNews=!0:0==e.length&&(this.hasNews=!1);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toindex:function(){this.$router.push("/Index")},quit:function(){this.$router.push("/Login")},toinformation:function(){this.$router.push("/Index/informationCenter")},searchName:function(){console.log(this.$store),this.$store.commit("center/initSearch",this.queryContent),this.allCompanyAsync()},radioValue:function(){this.$store.commit("center/initStatus",this.radio),this.allCompanyAsync()},handleCurrentChange:function(t){this.$store.commit("center/changePage",t),this.allCompanyAsync()},updateName:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.form1.name,t.next=3,this.changeNameAsync({userName:e});case 3:a=t.sent,200===a.code?(this.form1.name="",this.$message("修改成功"),this.$router.push("/Login")):this.$message("修改失败");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updatePassword:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.form2.old,a=this.form2.new,r=this.form2.again,t.next=5,this.changePasswordAsync({oldPwd:e,newPwd:a,verPwd:r});case 5:s=t.sent,200===s.data.code?(this.form2.old="",this.form2.new="",this.form2.again="",this.$message("修改成功"),this.$router.push("/Login")):201===s.data.code?(this.form2.old="",this.form2.new="",this.form2.again="",this.$message("三条数据不完整，请全部输入")):202===s.data.code?(this.form2.old="",this.form2.new="",this.form2.again="",this.$message("初始密码错误，请重新输入")):203===s.data.code?(this.form2.old="",this.form2.new="",this.form2.again="",this.$message("两次输入的密码不一致，请重新输入")):204===s.data.code&&(this.form2.old="",this.form2.new="",this.form2.again="",this.$message("密码格式错误，请重新输入"));case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),zoomEnd:function(t){},detail:function(t,e){this.bid=t.bid,this.reveal=!0,this.drawChart2(),this.drawChart3(),this.drawChart4(),this.address=t.address,this.center.lng=t.longitude,this.center.lat=t.latitude,console.log(t);for(var a=this.markers.reverse(),r=0;r<a.length;r++)a[r].showla=!0;this.markers.reverse()},handler:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,r,s,n,i,o,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.BMap,r=e.map,t.next=3,this.allLongitudeAsync();case 3:for(s=t.sent,this.companyList=s,n=new a.Point(104.081548,30.652613),r.centerAndZoom(n,6),i=0;i<this.companyList.length;i++)o={lng:this.companyList[i].longitude,lat:this.companyList[i].latitude,companyAdress:this.companyList[i].address,companyName:this.companyList[i].bname,showla:!1},this.markers.push(o);l={style:"midnight"},r.setMapStyle(l);case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getClickInfo:function(t){console.log(t.point.lng),console.log(t.point.lat),this.center.lng=t.point.lng,this.center.lat=t.point.lat},drawChart1:function(){var t=this.$echarts.init(document.getElementById("chartOne"));Object.assign(c.data1,this.cooprate),0==c.series[0].data[0].value||0==c.series[0].data[1].value?(c.series[0].itemStyle.normal.labelLine.show=!1,c.series[0].itemStyle.normal.label.show=!1):(c.series[0].itemStyle.normal.labelLine.show=!0,c.series[0].itemStyle.normal.label.show=!0),t.setOption(c)},drawChart2:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.bid,t.next=3,this.allChartsAsync({bid:e});case 3:a=t.sent,this.companyAll=a[2].prodata[0].value+a[2].prodata[1].value,r=this.$echarts.init(document.getElementById("chartTwo")),Object.assign(h.data2,a[2].prodata),0==h.series[0].data[0].value||0==h.series[0].data[1].value?(h.series[0].itemStyle.normal.labelLine.show=!1,h.series[0].itemStyle.normal.label.show=!1):(h.series[0].itemStyle.normal.labelLine.show=!0,h.series[0].itemStyle.normal.label.show=!0),r.setOption(h);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),drawChart3:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.bid,t.next=3,this.allChartsAsync({bid:e});case 3:a=t.sent,this.terminalAll=a[0].clidata[0].value+a[0].clidata[1].value,r=this.$echarts.init(document.getElementById("chartThree")),Object.assign(m.data3,a[0].clidata),0==m.series[0].data[0].value||0==m.series[0].data[1].value?(m.series[0].itemStyle.normal.labelLine.show=!1,m.series[0].itemStyle.normal.label.show=!1):(m.series[0].itemStyle.normal.labelLine.show=!0,m.series[0].itemStyle.normal.label.show=!0),r.setOption(m);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),drawChart4:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.bid,t.next=3,this.allChartsAsync({bid:e});case 3:a=t.sent,this.yardAll=a[1].disdata[0].value+a[1].disdata[1].value,r=this.$echarts.init(document.getElementById("chartFour")),Object.assign(f.data4,a[1].disdata),0==f.series[0].data[0].value||0==f.series[0].data[1].value?(f.series[0].itemStyle.normal.labelLine.show=!1,f.series[0].itemStyle.normal.label.show=!1):(f.series[0].itemStyle.normal.labelLine.show=!0,f.series[0].itemStyle.normal.label.show=!0),r.setOption(f);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),components:{BmlMarkerClusterer:o["BmlMarkerClusterer"]}},k=S,x=(a("83ee"),a("34ee"),a("2877")),O=Object(x["a"])(k,r,s,!1,null,"10cdb230",null);e["default"]=O.exports},"34ee":function(t,e,a){"use strict";var r=a("b961"),s=a.n(r);s.a},"83ee":function(t,e,a){"use strict";var r=a("f48d"),s=a.n(r);s.a},b961:function(t,e,a){},f48d:function(t,e,a){}}]);
//# sourceMappingURL=chunk-88000f8e.6bdae32f.js.map